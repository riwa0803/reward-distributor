sequenceDiagram
    participant Admin as 管理者/オペレーター
    participant Creator as Airdrop作成者
    participant RC as RewardDistributor コントラクト
    participant EL as イベントリスナー
    participant DB as データベース
    participant BE as バックエンド

    %% Airdrop期間更新フロー
    rect rgb(230, 240, 255)
      note over Admin, DB: Airdrop期間更新フロー
      Admin->>RC: updateAirdropPeriod(airdropId, newStartDate, newEndDate)
      RC->>RC: 権限チェック(isOwner || isOperator || isCreator)
      RC->>RC: require(newEndDate > newStartDate)
      RC->>RC: airdrops[airdropId].startDate = newStartDate
      RC->>RC: airdrops[airdropId].endDate = newEndDate
      RC-->>Admin: トランザクション完了
      RC-->>EL: AirdropPeriodUpdatedイベント発行
      EL->>EL: イベント検知
      EL->>DB: Airdrop期間を更新
      EL->>BE: 管理者に通知
    end

    %% Airdrop期限延長フロー
    rect rgb(240, 255, 240)
      note over Creator, DB: Airdrop期限延長フロー
      Creator->>RC: extendAirdropPeriod(airdropId, newEndDate)
      RC->>RC: 権限チェック(isOwner || isOperator || isCreator)
      RC->>RC: require(newEndDate > airdrops[airdropId].endDate)
      RC->>RC: airdrops[airdropId].endDate = newEndDate
      RC-->>Creator: トランザクション完了
      RC-->>EL: AirdropExtendedイベント発行
      EL->>EL: イベント検知
      EL->>DB: Airdrop終了日を更新
      EL->>BE: 通知（オプション）
    end

    %% Operatorロール追加フロー
    rect rgb(235, 235, 255)
      note over Admin, RC: Operatorロール追加フロー
      Admin->>RC: addOperator(operatorAddress)
      RC->>RC: onlyOwner確認
      RC->>RC: operators[operatorAddress] = true
      RC-->>Admin: トランザクション完了
      RC-->>EL: OperatorAddedイベント発行
    end

    %% Operatorロール削除フロー
    rect rgb(255, 235, 235)
      note over Admin, RC: Operatorロール削除フロー
      Admin->>RC: removeOperator(operatorAddress)
      RC->>RC: onlyOwner確認
      RC->>RC: operators[operatorAddress] = false
      RC-->>Admin: トランザクション完了
      RC-->>EL: OperatorRemovedイベント発行
    end

    %% DB同期フロー
    rect rgb(245, 245, 255)
      note over BE, DB: DB同期フロー
      BE->>RC: getAllAirdropInfo(airdropId)
      RC-->>BE: {isActive, startDate, endDate, creator}
      BE->>DB: オンチェーン情報と同期
    end
